### ベンチマークの設定と実行

1. インスタンス起動時には、チームを識別するための API key の初期設定が必要です。API key は[管理画面](https://isucon2013.kayac.com/) にチーム代表者が参加登録したアカウントでログインしたトップページに表示されていますので、下記コマンドを実行してください
  
  ```
  $ sudo isucon3 --register APIKEY
  ```
  
  インスタンスを別途起動し直した場合 (rebootではなく stop, start した場合など) には、再度起動したインスタンスで初期設定を行ってください
  
  別のインスタンスで API key の初期設定を行うと、それまで設定されていたインスタンスではベンチマークが実行できなくなります
2. 起動したインスタンスの TCP 80 で Web アプリケーションが起動しています
  * 初期設定では Perl 実装が起動している状態です
  * PHP実装のみ他言語と起動方法が異なるため、`/home/isucon/webapp/php/README.md` を参照してください
  * SignInのためのテスト用アカウントは username: isucon1 password: isucon1 を使用してください
3. ベンチマークをテスト実行するためには、下記コマンドを入力してください (管理サーバにスコアを送信しません)
  
  ```
  $ sudo isucon3 test
  ```
  
  テスト実行の場合は、初期設定時に投入されているデータベースのデータはリセットされません
4. 管理サーバにスコアを送信する計測を行う場合は、以下のコマンドを入力してください
  
  ```
  $ sudo isucon3 bench [--init /path/to/script] [--workload N]
  ```
  
  * 初期設定時と同様の状態にデータベースがリセットされます。そのため、実行開始までに数十秒程度の時間がかかります
    * データベースリセットのためには以下の条件を満たす必要があります
      * MySQL が起動している
      * user `isucon`, password なしで `isucon` データベースに接続可能
    * MySQL の `root` ユーザのパスワードは `root` です
  * `--init` 引数に任意の実行可能なコマンド(スクリプトなど)を指定することで、データベースリセット後に任意の処理を行うことができます
    * MySQL 以外のストレージにデータを移すなどの処理はここで行ってください
    * ただしコマンドの実行終了を待つのは実時間で60秒までで、それ以上経過すると強制終了されます
  * `--workload` は省略可能で、デフォルト 1 です。テスト実行時と同様の負荷になります
    * 2,3,4...と数値を増やすごとにベンチマークで掛けられる負荷が上がります
    * スコアの集計は `workload` で区別せずに行います

